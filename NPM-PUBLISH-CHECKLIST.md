# NPM Package Publishing Checklist

This checklist ensures the SVG-BBOX package is ready for npm publication.

## âœ… Package Metadata (package.json)

- [x] **name**: `svg-bbox` âœ…
- [x] **version**: `1.0.1` âœ… (follows semantic versioning)
- [x] **description**: Clear and concise âœ…
- [x] **main**: `./SvgVisualBBox.js` âœ…
- [x] **type**: `module` âœ…
- [x] **author**: `Emasoft` âœ…
- [x] **license**: `MIT` âœ…
- [x] **keywords**: Comprehensive list including svg, bbox, inkscape, etc. âœ…
- [x] **repository**: GitHub URL set âœ…
- [x] **bugs**: Issue tracker URL set âœ…
- [x] **homepage**: README link set âœ…
- [x] **engines**: `node >= 18.0.0` âœ…

## âœ… Binary Commands (bin)

All 9 CLI commands properly configured:

**Core Tools:**
- [x] `sbb-getbbox` â†’ `./sbb-getbbox.cjs` âœ…
- [x] `sbb-extractor` â†’ `./sbb-extractor.cjs` âœ…
- [x] `sbb-fix-viewbox` â†’ `./sbb-fix-viewbox.cjs` âœ…
- [x] `sbb-render` â†’ `./sbb-render.cjs` âœ…
- [x] `sbb-comparer` â†’ `./sbb-comparer.cjs` âœ…
- [x] `sbb-test` â†’ `./sbb-test.cjs` âœ…

**Inkscape Integration Tools:**
- [x] `sbb-inkscape-text2path` â†’ `./sbb-inkscape-text2path.cjs` âœ…
- [x] `sbb-inkscape-extract` â†’ `./sbb-inkscape-extract.cjs` âœ…
- [x] `sbb-inkscape-svg2png` â†’ `./sbb-inkscape-svg2png.cjs` âœ…

## âœ… Files Whitelist

Files array includes all necessary files:
- [x] `SvgVisualBBox.js` - Main library âœ…
- [x] `sbb-*.cjs` - All CLI tools (pattern match) âœ…
- [x] `browser-utils.cjs` - Browser utilities âœ…
- [x] `version.cjs` - Version management âœ…
- [x] `lib/` - Shared utilities directory âœ…
- [x] `README.md` - Documentation âœ…
- [x] `LICENSE` - MIT license âœ…
- [x] `CHANGELOG.md` - Change history âœ…

## âœ… Dependencies

**Production Dependencies:**
- [x] `chrome-launcher`: ^1.1.2 âœ…
- [x] `pngjs`: ^7.0.0 âœ…
- [x] `puppeteer`: ^24.31.0 âœ…

**No peer dependencies** (all dependencies are bundled) âœ…

**Dev Dependencies:**
- [x] All testing frameworks (vitest, playwright) âœ…
- [x] Linting tools (eslint, prettier) âœ…
- [x] Type checking (typescript) âœ…

## âœ… Scripts

**Essential Scripts:**
- [x] `test`: Runs vitest âœ…
- [x] `lint`: ESLint + Prettier check âœ…
- [x] `typecheck`: TypeScript check âœ…
- [x] `prepublishOnly`: Runs lint + typecheck + test âœ… **CRITICAL**

**Additional Scripts:**
- [x] `test:unit`, `test:integration`, `test:e2e` âœ…
- [x] `test:coverage` âœ…
- [x] `lint:fix`, `format` âœ…
- [x] `version:bump:*` - Version management âœ…

## âœ… Documentation Files

- [x] **README.md**: Comprehensive with all tools documented âœ…
  - Installation instructions âœ…
  - All 9 CLI tools documented âœ…
  - Inkscape tools with accuracy warnings âœ…
  - Examples and usage âœ…
  - Feature comparison table âœ…

- [x] **CHANGELOG.md**: Follows Keep a Changelog format âœ…
  - Unreleased section with new features âœ…
  - Previous versions documented âœ…
  - Semantic versioning links âœ…

- [x] **LICENSE**: MIT license present âœ…

- [x] **CONTRIBUTING.md**: Contribution guidelines present âœ…

- [x] **SECURITY.md**: Security policy present âœ…

- [x] **CODE_OF_CONDUCT.md**: Code of conduct present âœ…

## âœ… .npmignore

Properly excludes:
- [x] Test files and directories (`tests/`, `coverage/`) âœ…
- [x] Development files (`docs_dev/`, `scripts_dev/`) âœ…
- [x] CI/CD configs (`.github/`, `eslint.config.js`) âœ…
- [x] Development scripts and tools âœ…
- [x] Build artifacts and logs âœ…
- [x] OS-specific files (`.DS_Store`) âœ…

## âœ… Testing

**Unit Tests:**
- [x] `tests/unit/` - Core functionality tests âœ…

**Integration Tests:**
- [x] `tests/integration/sbb-comparer.test.js` âœ…
- [x] `tests/integration/sbb-inkscape-extract.test.js` (6 tests) âœ…
- [x] `tests/integration/sbb-inkscape-svg2png.test.js` (12 tests) âœ…
- [x] `tests/integration/sbb-inkscape-text2path.test.js` (8 tests) âœ…

**E2E Tests:**
- [x] `tests/e2e/` - Playwright end-to-end tests âœ…

**Test Results:**
- [x] All tests passing âœ…
- [x] Test coverage configured âœ…

## âœ… CI/CD

**GitHub Actions Workflow (`.github/workflows/ci.yml`):**
- [x] Lint job âœ…
- [x] Type check job âœ…
- [x] Test matrix (Node 18, 20, 22 on Ubuntu, macOS, Windows) âœ…
- [x] E2E test job âœ…
- [x] Coverage job with Codecov integration âœ…
- [x] All jobs passing âœ…

## âœ… Code Quality

- [x] **ESLint**: Configuration present and passing âœ…
- [x] **Prettier**: Code formatting configured âœ…
- [x] **TypeScript**: Type checking via JSDoc âœ…
- [x] **No lint errors**: Clean codebase âœ…

## âœ… Security

- [x] **Path validation**: All CLI tools use security-utils âœ…
- [x] **No vulnerabilities**: Dependencies checked âœ…
- [x] **SECURITY.md**: Security policy documented âœ…
- [x] **Input sanitization**: Proper handling of user inputs âœ…

## âœ… Verification Steps

Before publishing, run these commands:

```bash
# 1. Clean install
rm -rf node_modules pnpm-lock.yaml
pnpm install

# 2. Run linting
pnpm run lint

# 3. Run type checking
pnpm run typecheck

# 4. Run all tests
pnpm run test
pnpm run test:integration
pnpm run test:e2e

# 5. Check package contents (dry run)
npm pack --dry-run

# 6. Test prepublishOnly script
npm run prepublishOnly

# 7. Verify version
node version.cjs

# 8. Build tarball locally
npm pack

# 9. Test installation from tarball
npm install -g ./svg-bbox-1.0.1.tgz

# 10. Test CLI commands
sbb-getbbox --version
sbb-inkscape-text2path --version
sbb-inkscape-extract --version
sbb-inkscape-svg2png --version
```

## âœ… Pre-Publish Final Checks

- [ ] **Version bump**: Update version in package.json if needed
- [ ] **CHANGELOG**: Move Unreleased to new version section
- [ ] **Git clean**: No uncommitted changes
- [ ] **Tests passing**: All CI jobs green
- [ ] **README updated**: All new features documented
- [ ] **Breaking changes**: Noted in CHANGELOG if any

## âœ… Publishing Commands

```bash
# Dry run (recommended first)
npm publish --dry-run

# Publish to npm (public package)
npm publish --access public

# If you need to publish a specific version
npm publish --tag beta  # For beta releases
npm publish --tag latest  # For stable releases (default)
```

## âœ… Post-Publish

- [ ] Create Git tag: `git tag v1.0.2 && git push --tags`
- [ ] Create GitHub release with CHANGELOG notes
- [ ] Update README badges if needed
- [ ] Announce release (Twitter, blog, etc.)
- [ ] Monitor npm downloads and issues

## ğŸ“ Current Status

**Package Name**: `svg-bbox`
**Current Version**: `1.0.1`
**Next Version**: `1.0.2` (patch) or `1.1.0` (minor) depending on changes

**Ready for Publishing**: âœ… YES

All core requirements are met. The package includes:
- 6 core CLI tools (battle-tested)
- 3 Inkscape integration tools (with proper warnings)
- Comprehensive documentation
- Full test coverage
- CI/CD pipeline
- Security best practices

**Recommendation**: Ready to publish as `1.1.0` (minor version bump) due to new Inkscape tools being added as new features.
