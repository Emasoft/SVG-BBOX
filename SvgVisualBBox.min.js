/*! SvgVisualBBox.js v1.1.11 | MIT License | https://github.com/Emasoft/SVG-BBOX */
var FJ=(o,c)=>()=>(c||o((c={exports:{}}).exports,c),c.exports);var kJ=FJ((zJ,t)=>{(function(o,c){if(typeof define==="function"&&define.amd)define([],c);else if(typeof t==="object"&&t.exports)t.exports=c();else o.SvgVisualBBox=c()})(typeof self<"u"?self:zJ,()=>{let c=new WeakMap;function r(J){return Boolean(J&&/^auto_id_/.test(J))}function n(J){if(!J)return"null/undefined element";let K=[],Q=J.tagName||J.nodeName||"unknown";if(K.push(`<${Q}>`),J.id){let $=r(J.id)?`id="${J.id}" (AUTO-GENERATED - not in original SVG!)`:`id="${J.id}"`;K.push($)}if(J.getAttribute&&J.getAttribute("class"))K.push(`class="${J.getAttribute("class")}"`);let Z=J.parentNode;if(Z&&Z instanceof Element){let $=Z.id?r(Z.id)?` id="${Z.id}" (AUTO-GENERATED)`:` id="${Z.id}"`:"";K.push(`(child of <${Z.tagName}>${$})`)}return K.join(" ")}function qJ(J){if(!J)return;try{let Q=new XMLSerializer().serializeToString(J),Z=new Date().toISOString().replace(/[:.]/g,"-").replace("T","_").slice(0,-5),$=J.id||"svg";if(typeof window<"u")window.__DEBUG_SVG_DATA__={content:Q,filename:`${$}_debug_${Z}.svg`,timestamp:Z}}catch(K){}}function s(J,K){let Q=J&&J.id&&r(J.id),Z=J&&J.parentNode&&J.parentNode instanceof Element&&J.parentNode.id&&r(J.parentNode.id),$=K&&K.id&&r(K.id);if(!Q&&!Z&&!$)return"";qJ(K);let E=J&&J.id?J.id:"(none)",S=new Date().toISOString().replace(/[:.]/g,"-").replace("T","_").slice(0,-5),z=`${K&&K.id?K.id:"svg"}_debug_${S}.svg`;return`
`+`⚠️  AUTO-GENERATED ID WARNING:
`+`   The IDs shown above were automatically assigned by sbb-extract.cjs.
   These IDs DO NOT EXIST in your original SVG file!

`+`   \uD83D\uDD0D DEBUG SVG WILL BE AUTOMATICALLY SAVED:
`+`   ${z}

   To find this element in your original SVG:
   1. Open the debug SVG file (saved automatically in current directory)
   2. Search for the ID "${E}" to locate the problematic element
   3. Note the element's position, visual appearance, and attributes
   4. Find the corresponding element in your original SVG using these details
`}function e(J){if(!J||typeof window>"u"||!window.getComputedStyle)return"unknown";try{let K=window.getComputedStyle(J);return K.fontFamily||K.getPropertyValue("font-family")||"default"}catch{return"error detecting font"}}async function JJ(J,K){if(!J)J=document;if(typeof K!=="number"||!isFinite(K))K=5000;let Q=J.fonts;if(!Q||!Q.ready)return;let Z=Q.ready;if(K<=0){await Z;return}await Promise.race([Z,new Promise(($)=>setTimeout(()=>{$(void 0)},K))])}function KJ(J,K,Q){let Z=K.width/Q.width,$=K.height/Q.height,S=(J.getAttribute("preserveAspectRatio")||"xMidYMid meet").trim().split(/\s+/).filter((u)=>u!=="defer");if(S.length===1&&S[0]==="none")return{scaleX:Z,scaleY:$,offsetX:0,offsetY:0,uniform:!1};let _=S[0]||"xMidYMid",z=S[1]||"meet",L;if(z==="slice")L=Math.min(Z,$);else L=Math.max(Z,$);let H=K.width/L,X=K.height/L,F=Q.width-H,Y=Q.height-X,T=0,C=0;if(_.startsWith("xMid"))T=F/2;else if(_.startsWith("xMax"))T=F;if(_.includes("YMid"))C=Y/2;else if(_.includes("YMax"))C=Y;return{scale:L,offsetX:T,offsetY:C,uniform:!0}}function GJ(J){try{let K=J.getBoundingClientRect(),Q=J.ownerSVGElement||(J instanceof SVGSVGElement?J:null);if(!Q||!K)return null;if(K.width===0&&K.height===0)return null;let Z=Q.getBoundingClientRect(),$=Q.viewBox&&Q.viewBox.baseVal;if(!$||$.width<=0||$.height<=0)return null;if(Z.width<=0||Z.height<=0)return null;let E=KJ(Q,$,Z),S,_,z,L;if(E.uniform){let H=E.scale;S=$.x+(K.left-Z.left-E.offsetX)*H,_=$.y+(K.top-Z.top-E.offsetY)*H,z=K.width*H,L=K.height*H}else S=$.x+(K.left-Z.left)*E.scaleX,_=$.y+(K.top-Z.top)*E.scaleY,z=K.width*E.scaleX,L=K.height*E.scaleY;if(!isFinite(S)||!isFinite(_))return null;if(!isFinite(z)||!isFinite(L))return null;return{x:S,y:_,width:z,height:L}}catch{return null}}async function QJ(J,K,Q,Z){if(!J)throw Error("rasterizeSvgElementToBBox: element parameter is null or undefined");if(!K)throw Error("rasterizeSvgElementToBBox: svgRoot parameter is null or undefined");if(!Q||typeof Q!=="object")throw Error("rasterizeSvgElementToBBox: roi parameter must be an object with x, y, width, height");if(Q.width<=0||Q.height<=0)return null;if(typeof Z!=="number"||Z<=0||!isFinite(Z))throw Error(`rasterizeSvgElementToBBox: pixelsPerUnit must be a positive finite number, got: ${Z}`);let $=Q,E=!!J.id,S;if(!E)S="__svg_visual_bbox_tmp_"+Math.random().toString(36).slice(2),J.id=S;let _=K.cloneNode(!0);if(!E)J.removeAttribute("id");if(!_.getAttribute("xmlns"))_.setAttribute("xmlns","http://www.w3.org/2000/svg");_.setAttribute("viewBox",$.x+" "+$.y+" "+$.width+" "+$.height);let z=16384,L=Math.max(1,Math.round($.width*Z)),H=Math.max(1,Math.round($.height*Z)),X=Z,F=L,Y=H;if(L>z||H>z){let O=z/L,G=z/H,N=Math.min(O,G);X=Z*N,F=Math.max(1,Math.round($.width*X)),Y=Math.max(1,Math.round($.height*X))}_.setAttribute("width",String(F)),_.setAttribute("height",String(Y)),_.setAttribute("preserveAspectRatio","none"),_.removeAttribute("x"),_.removeAttribute("y");let T;if(J===K)T=_;else{let O=S||J.id;T=_.getElementById(O)}if(!T){let O=n(J),G=S?`Temporary ID used: "${S}"`:`Element ID: ${J.id?`"${J.id}"`:"(none)"}`,N=s(J,K);throw Error(`❌ Cannot render SVG element: Element not found in cloned SVG
`+`
ELEMENT DETAILS:
  ${O}
  ${G}
  SVG Root: ${K.id?`id="${K.id}"`:"(no id)"}
`+N+`
This typically happens when:
  1. The element IS the SVG root itself (not supported - query a child element instead)
  2. The element was removed or modified during cloning
  3. The element's ID conflicts with another element

How to fix:
`+`  • If querying the root <svg>, query a child element instead
`+`  • Ensure the element has a unique 'id' attribute
`+`  • Check that the element exists in the DOM before calling this function
`+"  • Verify the element hasn't been dynamically removed")}let C=new Set,u=T;while(u){if(C.add(u),u===_)break;u=u.parentNode}(function O(G){C.add(G);let N=G.children;for(let W=0;W<N.length;W++){let V=N[W];if(V)O(V)}})(T),function O(G){let N=G.getAttribute&&G.getAttribute("xlink:href"),W=G.getAttribute&&G.getAttribute("href");for(let M of[N,W])if(M&&M.startsWith("#")){let I=M.substring(1),y=_.getElementById(I);if(!y){let w=document.getElementById(I);if(w){let g=_.querySelector("defs");if(!g)g=document.createElementNS("http://www.w3.org/2000/svg","defs"),_.insertBefore(g,_.firstChild);y=w.cloneNode(!0),g.appendChild(y),C.add(g)}}if(y&&!C.has(y)){C.add(y);let w=y.parentNode;while(w&&w!==_)C.add(w),w=w.parentNode}}let V=G.getAttribute&&G.getAttribute("style");if(V){let M=V.match(/url\(#([^)]+)\)/g);if(M)for(let I of M){let y=I.match(/url\(#([^)]+)\)/);if(!y)continue;let w=y[1];if(!w)continue;let g=_.getElementById(w);if(g&&!C.has(g)){C.add(g);let i=g.parentNode;while(i&&i!==_)C.add(i),i=i.parentNode}}}let h=G.children;for(let M=0;M<h.length;M++){let I=h[M];if(I)O(I)}}(T);let q=T.tagName&&T.tagName.toLowerCase();if(q==="tspan"||q==="textpath"){let O=T.parentNode;if(O){let G=Array.from(O.children);for(let N of G){let W=N.tagName&&N.tagName.toLowerCase();if(W==="tspan"||W==="textpath")C.add(N),function V(h){C.add(h);let M=h.children;for(let I=0;I<M.length;I++){let y=M[I];if(y)V(y)}}(N)}}}(function O(G){let N=Array.prototype.slice.call(G.children);for(let W=0;W<N.length;W++){let V=N[W];if((V.tagName&&V.tagName.toLowerCase())==="defs")continue;if(!C.has(V)&&!V.contains(T))V.parentNode.removeChild(V);else O(V)}})(_);let D=new XMLSerializer().serializeToString(_),j=new Blob([D],{type:"image/svg+xml;charset=utf-8"}),A=URL.createObjectURL(j),P=new Image,B=null,f=null;try{if(P.decoding="async",P.crossOrigin="anonymous",P.src=A,await new Promise((O,G)=>{let N=function(){P.onload=null,P.onerror=null,O(void 0)},W=function(V){P.onload=null,P.onerror=null;let h=V&&typeof V==="object"&&"message"in V?String(V.message):"unknown error",M=n(J),I=e(J),y=s(J,K);G(Error(`❌ Failed to render SVG as image: ${h}

ELEMENT DETAILS:
  ${M}
  Font-family: ${I}
  SVG Root: ${K.id?`id="${K.id}"`:"(no id)"}
`+y+`
This can happen when:
  1. The SVG contains invalid XML syntax
  2. Referenced resources (images, fonts) failed to load
  3. The SVG uses unsupported features
  4. Browser security policies blocked the rendering

How to fix:
`+`  • Validate your SVG with an XML validator
`+`  • Check that all external resources (images, fonts) are accessible
`+`  • Ensure referenced elements (gradients, patterns, etc.) exist in <defs>
`+`  • If fonts are missing, ensure they are installed or embedded in the SVG
`+"  • Try simplifying the SVG to isolate the problematic element"))};P.onload=N,P.onerror=W}),B=document.createElement("canvas"),B.width=F,B.height=Y,f=B.getContext("2d"),!f)throw Error("Failed to get canvas 2D context");f.clearRect(0,0,F,Y),f.drawImage(P,0,0,F,Y)}finally{URL.revokeObjectURL(A),P.src="",P.onload=null,P.onerror=null}let R;try{if(!f)throw Error("Canvas context is null");R=f.getImageData(0,0,F,Y)}catch(O){let G=O instanceof Error?O.message:"",N=/out of memory/i.test(G),W=/tainted/i.test(G);if(N){let I=n(J),y=s(J,K);throw Error(`❌ Cannot render SVG: Canvas out of memory
`+`
ELEMENT DETAILS:
  ${I}
  SVG Root: ${K.id?`id="${K.id}"`:"(no id)"}
`+y+`
The SVG coordinates or dimensions are too large for canvas rasterization.
Current viewBox: ${$.x} ${$.y} ${$.width} ${$.height}
Attempted canvas size: ${F}×${Y} pixels

How to fix:
`+`  • Reduce the viewBox dimensions to a reasonable size (< 10,000 units)
`+`  • Use smaller coordinates (avoid values > 100,000)
`+`  • Decrease the pixelsPerUnit scaling factor
`+`  • Split large SVG into smaller regions and process separately
`+`
Original error: ${G}`)}if(W){let I=n(J),y=e(J),w=s(J,K);throw Error(`❌ Cannot read SVG pixels: Canvas is tainted by cross-origin resources
`+`
ELEMENT DETAILS:
  ${I}
  Font-family: ${y}
  SVG Root: ${K.id?`id="${K.id}"`:"(no id)"}
`+w+`
This happens when your SVG references external resources without CORS:
`+`  • External images (PNG, JPG, etc.) from different domains
`+`  • Web fonts from CDNs without proper CORS headers
`+`  • SVG <use> elements referencing external files
`+`
How to fix:
`+`  • Host images/fonts on the same domain as your page
`+`  • Configure CORS headers on external resources (Access-Control-Allow-Origin: *)
`+`  • Use data URLs for images instead of external URLs
`+`  • Embed fonts directly in the SVG using @font-face with data URLs
`+`  • If using web fonts (like "${y}"), ensure they have CORS headers or embed them

Original error: ${G}`)}let V=n(J),h=e(J),M=s(J,K);throw Error(`❌ Cannot read SVG pixels from canvas
`+`
ELEMENT DETAILS:
  ${V}
  Font-family: ${h}
  SVG Root: ${K.id?`id="${K.id}"`:"(no id)"}
`+M+`
Error: ${G||"unknown canvas error"}

Common causes:
`+`  • Cross-origin images/fonts without CORS (canvas becomes "tainted")
`+`  • Canvas size too large (out of memory)
`+`  • Browser security restrictions
`+`
How to fix:
`+`  • Check browser console for specific CORS errors
`+`  • Ensure all external resources are same-origin or have CORS enabled
`+"  • Try reducing the SVG size or complexity")}let a=R.data,p=F,b=-1,x=Y,k=-1;for(let O=0;O<Y;O++){let G=O*F*4;for(let N=0;N<F;N++){let W=G+N*4;if(a[W+3]!==0){if(N<p)p=N;if(N>b)b=N;if(O<x)x=O;if(O>k)k=O}}}if(b<p||k<x)return null;let U=$.x+p/X,d=$.y+x/X,v=(b-p+1)/X,m=(k-x+1)/X;return{x:U,y:d,width:v,height:m}}async function l(J,K){K=K||{};let Q=K.mode||"clipped",Z=typeof K.coarseFactor==="number"?K.coarseFactor:3,$=typeof K.fineFactor==="number"?K.fineFactor:24,E=typeof K.safetyMarginUser==="number"?K.safetyMarginUser:null,S=typeof K.useLayoutScale==="boolean"?K.useLayoutScale:!0,_=typeof K.fontTimeoutMs==="number"?K.fontTimeoutMs:5000,z=typeof J==="string"?document.getElementById(J):J;if(!z){let F=typeof J==="string"?`id="${J}"`:"provided reference";throw Error(`❌ Cannot compute SVG bounding box: Element not found
`+`
REQUESTED ELEMENT:
  ${F}
  Type: ${typeof J}

How to fix:
`+`  • Check that the element exists in the DOM
`+`  • Verify the element ID is correct (case-sensitive)
`+`  • Ensure the element hasn't been removed from the DOM
`+"  • If passing an element reference, make sure it's not null/undefined")}let L=c.get(z);if(L)await L;let H=(F)=>{},X=new Promise((F)=>{H=F});c.set(z,X);try{let F=z.ownerDocument||document;await JJ(F,_);let Y=z.ownerSVGElement||(z instanceof SVGSVGElement?z:null);if(!Y){let k=n(z),U=z&&z.id&&r(z.id)?`
⚠️  NOTE: This element has an AUTO-GENERATED ID ("${z.id}").
   This ID was added by sbb-extract.cjs and doesn't exist in your original SVG.

`:"";throw Error(`❌ Cannot compute SVG bounding box: Element is not inside an SVG tree
`+`
ELEMENT DETAILS:
  ${k}
`+U+`This element is not connected to an <svg> root element.

How to fix:
`+`  • Ensure the element is inside an <svg> tag in the DOM
`+`  • Check that you're not querying a detached/orphaned element
`+`  • If creating elements programmatically, append them to the SVG tree first
`+"  • Verify the element hasn't been removed from the document")}let T=Y.viewBox&&Y.viewBox.baseVal,C;if(T&&T.width&&T.height)C={x:T.x,y:T.y,width:T.width,height:T.height};else{let k=GJ(Y);if(k)C={x:k.x,y:k.y,width:k.width,height:k.height};else C={x:-2000,y:-2000,width:4000,height:4000}}let u=[];(function k(U){let d=U.getAttribute&&U.getAttribute("xlink:href"),v=U.getAttribute&&U.getAttribute("href");for(let G of[d,v])if(G&&G.startsWith("#")){let N=G.substring(1),W=Y.getElementById(N);if(W&&!u.includes(W))u.push(W)}let m=U.getAttribute&&U.getAttribute("style");if(m){let G=m.match(/url\(#([^)]+)\)/g);if(G)for(let N of G){let W=N.match(/url\(#([^)]+)\)/);if(!W)continue;let V=W[1];if(!V)continue;let h=Y.getElementById(V);if(h&&!u.includes(h))u.push(h)}}let O=U.children;for(let G=0;G<O.length;G++)k(O[G])})(z);let q;if(Q==="unclipped"){let{x:k,y:U}=C,d=C.x+C.width,v=C.y+C.height,m=KJ(Y,C,Y.getBoundingClientRect()),O=(G)=>{try{let N=G.getBoundingClientRect(),W=Y.getBoundingClientRect();if(N.width>0&&N.height>0){let V,h,M,I;if(m.uniform){let w=m.scale;V=C.x+(N.left-W.left-m.offsetX)*w,h=C.y+(N.top-W.top-m.offsetY)*w,M=C.x+(N.right-W.left-m.offsetX)*w,I=C.y+(N.bottom-W.top-m.offsetY)*w}else V=C.x+(N.left-W.left)*m.scaleX,h=C.y+(N.top-W.top)*m.scaleY,M=C.x+(N.right-W.left)*m.scaleX,I=C.y+(N.bottom-W.top)*m.scaleY;let y=200;k=Math.min(k,V-y),U=Math.min(U,h-y),d=Math.max(d,M+y),v=Math.max(v,I+y)}}catch{}};O(z);for(let G of u)O(G);q={x:k,y:U,width:d-k,height:v-U}}else q={x:C.x,y:C.y,width:C.width,height:C.height};let D=1;if(S&&C.width>0&&C.height>0){let k=Y.getBoundingClientRect();if(k&&k.width>0&&k.height>0){let U=k.width/C.width,d=k.height/C.height;D=(U+d)/2}}let j=Math.max(1,D*Z),A=Math.max(4,D*$),P=await QJ(z,Y,q,j);if(!P)return null;let B=E;if(B===null||B===void 0||!isFinite(B)){let k=Math.max(P.width,P.height);B=(k>0?k*0.25:0)+100}let f=P.x-B,R=P.y-B,a=P.x+P.width+B,p=P.y+P.height+B,b={x:f,y:R,width:Math.max(0,a-f),height:Math.max(0,p-R)};if(b.width<=0||b.height<=0)return null;let x=await QJ(z,Y,b,A);if(!x)return null;return{x:x.x,y:x.y,width:x.width,height:x.height,element:z,svgRoot:Y}}finally{H(),c.delete(z)}}async function ZJ(J,K){if(!Array.isArray(J)||J.length===0)throw Error(`Cannot compute union bounding box: Invalid targets parameter

Expected: Non-empty array of SVG elements or element IDs
Received: ${Array.isArray(J)?"empty array":typeof J}

How to fix:
`+`  • Pass an array with at least one element
`+`  • Example: ['element1', 'element2'] or [el1, el2]
`+"  • Ensure the array is not empty before calling this function");let Q=[],Z=null;for(let z=0;z<J.length;z++){let L=J[z];if(!L)continue;let H=await l(L,K);if(!H)continue;if(!Z)Z=H.svgRoot;else if(H.svgRoot!==Z){let X=Z.id?`id="${Z.id}"`:"(no id)",F=H.svgRoot.id?`id="${H.svgRoot.id}"`:"(no id)";throw Error(`Cannot compute union bounding box: Elements from different SVG documents

All elements must belong to the same <svg> root element.
Previous SVG: ${X}
Current SVG:  ${F}

How to fix:
`+`  • Ensure all elements are children of the same <svg> root
`+`  • If you have multiple SVGs, compute bbox for each separately
`+"  • Check that elements haven't been moved between different SVG trees")}Q.push(H)}if(Q.length===0)return null;let $=1/0,E=1/0,S=-1/0,_=-1/0;for(let z=0;z<Q.length;z++){let L=Q[z];if(!L)continue;$=Math.min($,L.x),E=Math.min(E,L.y),S=Math.max(S,L.x+L.width),_=Math.max(_,L.y+L.height)}if(!Z)return null;return{x:$,y:E,width:S-$,height:_-E,svgRoot:Z,bboxes:Q}}async function $J(J,K){K=K||{};let Q=Object.assign({},K,{mode:"clipped"}),Z=Object.assign({},K,{mode:"unclipped"}),$=await l(J,Q),E=await l(J,Z);return{visible:$,full:E}}async function CJ(J,K){K=K||{};let Q=typeof J==="string"?document.getElementById(J):J;if(!Q||!(Q instanceof SVGSVGElement)){let q=typeof J==="string"?`id="${J}"`:"provided reference";throw Error(`Cannot compute viewBox expansion: Invalid SVG root (${q})

Expected: Root <svg> element or its ID
Received: ${Q?Q.tagName:"null/undefined"}

How to fix:
`+`  • Pass the root <svg> element or its ID string
`+`  • Ensure the element is actually an <svg> tag, not a child element
`+"  • Check that the element exists in the DOM")}let Z=Q.viewBox&&Q.viewBox.baseVal;if(!Z||!Z.width||!Z.height){let q=Q.id?`id="${Q.id}"`:"(no id)";throw Error(`Cannot compute viewBox expansion: SVG missing valid viewBox (${q})

The root <svg> element must have a viewBox attribute with valid dimensions.
Current viewBox: ${Q.getAttribute("viewBox")||"(none)"}

How to fix:
`+`  • Add a viewBox attribute to your <svg> tag
`+`  • Example: <svg viewBox="0 0 800 600" ...>
`+`  • Ensure viewBox has 4 numbers: x, y, width, height
`+`  • Width and height must be greater than 0
`+"  • Use the sbb-fix-viewbox.cjs tool to auto-generate viewBox")}let $={x:Z.x,y:Z.y,width:Z.width,height:Z.height},E=await $J(Q,K),S=E.visible,_=E.full;if(!_)return null;let z=$.x+$.width,L=$.y+$.height,H=_.x+_.width,X=_.y+_.height,F=Math.max(0,$.x-_.x),Y=Math.max(0,$.y-_.y),T=Math.max(0,H-z),C=Math.max(0,X-L),u={x:$.x-F,y:$.y-Y,width:$.width+F+T,height:$.height+Y+C};return{currentViewBox:$,visibleBBox:S,fullBBox:_,padding:{left:F,top:Y,right:T,bottom:C},newViewBox:u}}async function _J(J,K){K=K||{};let Q=null;if(typeof J==="string"){if(Q=document.querySelector(J),!Q)throw Error(`SVG element not found: ${J}`)}else if(J instanceof Element)Q=J;else throw Error("Target must be a selector string or DOM element");if(Q.tagName.toLowerCase()==="object"&&"contentDocument"in Q&&Q.contentDocument){let G=Q.contentDocument.querySelector("svg");if(G)Q=G}else if(Q.tagName.toLowerCase()==="iframe"&&"contentDocument"in Q&&Q.contentDocument){let G=Q.contentDocument.querySelector("svg");if(G)Q=G}else if(Q.tagName.toLowerCase()==="use");if(!Q||!("ownerSVGElement"in Q)&&Q.tagName.toLowerCase()!=="svg")throw Error("Target is not an SVG element or does not contain SVG content");let Z=K.theme||"auto",$=!1;if(Z==="auto")$=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;else if(Z==="dark")$=!0;else if(Z==="light")$=!1;let E=$?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.6)",S=K.borderColor||E,_=K.borderWidth||"2px",z=K.borderStyle||"dashed",L=K.padding!==void 0?K.padding:4,H=K.zIndex!==void 0?K.zIndex:999999,X=K.bboxOptions||{},F=await l(Q,X);if(!F||F.width===0||F.height===0){console.warn("showTrueBBoxBorder: Element has zero-size bounding box",F);return}let Y=("ownerSVGElement"in Q?Q.ownerSVGElement:null)||Q,T=Y.getBoundingClientRect(),C=Y.viewBox.baseVal,u=0,q=0,D=T.width,j=T.height;if(C&&C.width>0&&C.height>0)u=C.x,q=C.y,D=C.width,j=C.height;let A=T.width/D,P=T.height/j,B=0,f=0,R=Y.getAttribute("preserveAspectRatio")||"xMidYMid meet";if(R!=="none"){let G=(R.includes("slice")?"slice":"meet")==="meet"?Math.min(A,P):Math.max(A,P),N=D*G,W=j*G;if(R.includes("xMid"))B=(T.width-N)/2;else if(R.includes("xMax"))B=T.width-N;if(R.includes("YMid"))f=(T.height-W)/2;else if(R.includes("YMax"))f=T.height-W;A=G,P=G}let a=T.left+B+(F.x-u)*A-L,p=T.top+f+(F.y-q)*P-L,b=F.width*A+L*2,x=F.height*P+L*2,k=document.createElement("div");k.style.position="fixed",k.style.left=`${a}px`,k.style.top=`${p}px`,k.style.width=`${b}px`,k.style.height=`${x}px`,k.style.border=`${_} ${z} ${S}`,k.style.pointerEvents="none",k.style.zIndex=String(H),k.style.boxSizing="border-box",k.setAttribute("data-svg-bbox-overlay","true"),k.setAttribute("data-target-id",Q.id||"anonymous"),document.body.appendChild(k);let U=()=>{let O=Y.getBoundingClientRect(),G=O.width/D,N=O.height/j,W=O.left+(F.x-u)*G-L,V=O.top+(F.y-q)*N-L,h=F.width*G+L*2,M=F.height*N+L*2;k.style.left=`${W}px`,k.style.top=`${V}px`,k.style.width=`${h}px`,k.style.height=`${M}px`},d=()=>U(),v=()=>U();return window.addEventListener("scroll",d,!0),window.addEventListener("resize",v),{bbox:F,overlay:k,remove:()=>{if(k.parentNode)k.parentNode.removeChild(k);window.removeEventListener("scroll",d,!0),window.removeEventListener("resize",v)}}}async function jJ(J,K,Q){Q=Q||{};let Z={aspect:Q.aspect||"stretch",aspectRatioMode:Q.aspectRatioMode||"meet",align:Q.align||"xMidYMid",visibility:Q.visibility||"unchanged",visibilityList:Q.visibilityList||null,margin:Q.margin||0,saveVisibilityList:Q.saveVisibilityList||!1,dryRun:Q.dryRun||!1,bboxOptions:Q.bboxOptions||{}},$;if(typeof J==="string"){let q=J.startsWith("#")?J:"#"+J;if($=document.querySelector(q),!$)$=document.getElementById(J)}else $=J;if(!$||$.tagName.toLowerCase()!=="svg")throw Error("Target must be an SVG element");let E=Array.isArray(K)?K:[K];if(E.length===0)throw Error("At least one object ID must be provided");let S=E.map((q)=>{let D=document.getElementById(q);if(!D)throw Error(`Element with ID "${q}" not found`);if(D.tagName.toLowerCase()==="symbol"){let j=Array.from($.querySelectorAll("use")).filter((P)=>{return(P.getAttribute("href")||P.getAttributeNS("http://www.w3.org/1999/xlink","href"))==="#"+q});if(j.length===0)throw Error(`Symbol "${q}" has no <use> elements referencing it`);if(j.length>1)throw Error(`Symbol "${q}" is referenced by multiple <use> elements. Please specify the exact <use> element ID.`);let A=j[0];if(!A)throw Error(`Symbol "${q}" has no <use> elements referencing it`);D=A}return D}),_=Z.bboxOptions||{};await JJ(document,_.fontTimeoutMs||8000);let z;if(S.length===1){let q=S[0];if(!q)throw Error("No element found");z=await l(q,_)}else{let q=S.filter((D)=>D!==null&&D!==void 0);z=await ZJ(q,_)}if(!z||z.width<=0||z.height<=0)throw Error("Could not compute valid bounding box for specified objects");let L=$.viewBox.baseVal,H={x:L.x||0,y:L.y||0,width:L.width||parseFloat($.getAttribute("width")||"0")||0,height:L.height||parseFloat($.getAttribute("height")||"0")||0};if(H.width===0||H.height===0){let q=$.getBoundingClientRect();H.width=q.width,H.height=q.height}let X=0;if(typeof Z.margin==="string"){let q=Z.margin.match(/^(-?[\d.]+)(px|%)?$/);if(q&&q[1]){let D=parseFloat(q[1]),j=q[2];if(j==="px"){let P=$.getBoundingClientRect().width/H.width;X=D/P}else if(j==="%"){let A=Math.sqrt(z.width*z.width+z.height*z.height);X=D/100*A}else X=D}}else X=Z.margin;let F;if(Z.aspect==="stretch")F={x:z.x-X,y:z.y-X,width:z.width+X*2,height:z.height+X*2};else if(Z.aspect==="changePosition"){let q=z.x+z.width/2,D=z.y+z.height/2;F={x:q-H.width/2,y:D-H.height/2,width:H.width,height:H.height}}else if(Z.aspect==="preserveAspectRatio"){let q=H.width/H.height,D=(z.width+X*2)/(z.height+X*2),j,A;if(Z.aspectRatioMode==="meet")if(q>D)A=z.height+X*2,j=A*q;else j=z.width+X*2,A=j/q;else if(q>D)j=z.width+X*2,A=j/q;else A=z.height+X*2,j=A*q;let P=z.x+z.width/2,B=z.y+z.height/2,f=Z.align.match(/^x(Min|Mid|Max)Y(Min|Mid|Max)$/),R=f?f[1]:"Mid",a=f?f[2]:"Mid",p,b;if(R==="Min")p=z.x-X;else if(R==="Max")p=z.x+z.width+X-j;else p=P-j/2;if(a==="Min")b=z.y-X;else if(a==="Max")b=z.y+z.height+X-A;else b=B-A/2;F={x:p,y:b,width:j,height:A}}else throw Error(`Unknown aspect mode: ${Z.aspect}`);let Y=null;if(Z.saveVisibilityList){let q={};$.querySelectorAll("[id]").forEach((j)=>{if(j instanceof HTMLElement||j instanceof SVGElement){let A=window.getComputedStyle(j);q[j.id]={display:j.style.display||A.display,visibility:j.style.visibility||A.visibility,opacity:j.style.opacity||A.opacity}}}),Y=q}let T={};if(Z.visibility!=="unchanged"&&!Z.dryRun){if(Z.visibility==="hideAllExcept")$.querySelectorAll("[id]").forEach((D)=>{if(D instanceof HTMLElement||D instanceof SVGElement){if(T[D.id]=D.style.display,!E.includes(D.id))D.style.display="none"}});else if(Z.visibility==="hideTargets")S.forEach((q)=>{if(q instanceof HTMLElement||typeof SVGElement<"u"&&q instanceof SVGElement)T[q.id]=q.style.display,q.style.display="none"});else if(Z.visibility==="restoreList"&&Z.visibilityList){let q=Z.visibilityList;Object.keys(q).forEach((D)=>{let j=document.getElementById(D);if(j){let A=q[D];if(!A)return;if(T[D]={display:j.style.display,visibility:j.style.visibility,opacity:j.style.opacity},A.display!==void 0)j.style.display=A.display;if(A.visibility!==void 0)j.style.visibility=A.visibility;if(A.opacity!==void 0)j.style.opacity=A.opacity}})}}let C=`${H.x} ${H.y} ${H.width} ${H.height}`;if(!Z.dryRun)$.setAttribute("viewBox",`${F.x} ${F.y} ${F.width} ${F.height}`);return{newViewBox:F,oldViewBox:H,bbox:z,visibilityList:Y,restore:()=>{$.setAttribute("viewBox",C),Object.keys(T).forEach((q)=>{let D=document.getElementById(q);if(D){let j=T[q];if(!j)return;if(typeof j==="string")D.style.display=j;else{if(j.display!==void 0)D.style.display=j.display;if(j.visibility!==void 0)D.style.visibility=j.visibility;if(j.opacity!==void 0)D.style.opacity=j.opacity}}})}}}return{waitForDocumentFonts:JJ,getSvgElementVisualBBoxTwoPassAggressive:l,getSvgElementsUnionVisualBBox:ZJ,getSvgElementVisibleAndFullBBoxes:$J,getSvgRootViewBoxExpansionForFullDrawing:CJ,showTrueBBoxBorder:_J,setViewBoxOnObjects:jJ}})});export default kJ();
